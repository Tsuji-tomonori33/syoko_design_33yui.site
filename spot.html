<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title id="page-title">スポット | 獅子島スタンプラリー</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>
<body class="spot-page">

<div class="spot-bg">
    <img id="spot-image" src="" alt="スポット写真">
    </div>

<div class="stamp-button">
    <button id="get-stamp">🎯 スタンプを押す！</button>
</div>

<p id="message" style="display:none;">
    ✅ スタンプを獲得しました！
</p>

<div class="back-home">
    <a href="index.html">🏠 スタンプ帳へ戻る</a>
</div>

<script>
// --- スポット情報の設定（高校生が編集するのはここだけ！） ---
// スポットIDと対応する情報を定義
const spotData = {
    1: {
        img: "images/backgrounds/spot1.png", // 実際にはimages/backgrounds/spot1.jpgなどのパスに変更
    },
    2: {
        img: "images/backgrounds/spot2.png",
    },
    3: {
        img: "images/backgrounds/spot3.png",
    },
    4: {
        img: "images/backgrounds/spot4.png",
    },
    5: {
        img: "images/backgrounds/spot5.png",
    }
};
// -----------------------------------------------------

const button = document.getElementById("get-stamp");
const message = document.getElementById("message");

// URLからスポットIDを取得
const urlParams = new URLSearchParams(window.location.search);
const spotId = urlParams.get('id');
const stampKey = `stamp${spotId}`;

if (spotId && spotData[spotId]) {
    const data = spotData[spotId];
    
    // ページコンテンツを更新
    // タイトルと見出しは、データにtitle/descが無いため、シンプルに設定
    document.getElementById("page-title").textContent = `スポット${spotId} | 獅子島スタンプラリー`;
    
    // 見出しと説明文の要素を非表示または削除したため、ここでのDOM操作も削除
    
    const spotImage = document.getElementById("spot-image");
    spotImage.src = data.img;
    spotImage.alt = `スポット${spotId}画像`;
    
    document.getElementById("message").innerHTML = `✅ スタンプ${spotId}を獲得しました！`;

    // すでに押していた場合
    if (localStorage.getItem(stampKey) === "get") {
        message.style.display = "block";
        button.disabled = true;
    }

    // 押すとスタンプ獲得
    button.addEventListener("click", () => {
        localStorage.setItem(stampKey, "get");
        message.style.display = "block";
        button.disabled = true;
    });

} else {
    // 不正なIDの場合の処理（例：エラーメッセージ表示）
    // <h1>タグがないため、代わりにbodyに直接エラーメッセージを表示するなどの対応が必要ですが、
    // ここではJavaScriptによるDOM操作を最小限にするため、エラー時の処理は削除します。
    // （QRコードが正しい前提で進めます）
    button.style.display = "none";
}
</script>
</body>
</html>
